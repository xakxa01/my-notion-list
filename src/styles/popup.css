@layer components {
  .popup-shell {
    @apply w-[360px] bg-zinc-50 p-3 text-[14px] text-zinc-900;
  }

  .popup-message {
    @apply mb-3 rounded-md px-2.5 py-2 text-[13px];
  }

  .popup-message--connected {
    @apply bg-emerald-50 text-emerald-700;
  }

  .popup-message--disconnected {
    @apply bg-amber-50 text-amber-700;
  }

  .popup-hint {
    @apply mb-3 text-[13px] text-zinc-500;
  }

  .popup-hint--centered {
    @apply w-full text-center;
  }

  .popup-card {
    @apply mb-3 rounded-lg border border-zinc-200 bg-zinc-50 p-3;
  }

  .topbar {
    @apply mb-3 flex flex-col gap-2.5;
  }

  .topbar-row {
    @apply flex items-center justify-between gap-2;
  }

  .topbar-title {
    @apply m-0 flex select-none items-center gap-2 whitespace-nowrap text-[1.1rem] font-semibold;
  }

  .topbar-logo {
    @apply h-[22px] w-[22px] shrink-0 select-none object-contain;
  }

  .topbar-actions {
    @apply flex items-center overflow-hidden rounded-[9px] border border-zinc-300 bg-zinc-50;
  }

  .topbar-action-btn {
    @apply inline-flex h-10 w-10 cursor-pointer items-center justify-center border-0 bg-transparent text-zinc-700 transition hover:bg-zinc-100 disabled:cursor-not-allowed disabled:opacity-70;
  }

  .topbar-action-btn + .topbar-action-btn {
    @apply border-l border-l-zinc-300;
  }

  .control-row {
    @apply flex items-center justify-between gap-2;
  }

  .control-group {
    @apply flex items-center gap-2;
  }

  .icon-btn {
    @apply inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md border border-zinc-300 bg-white text-zinc-800 transition hover:bg-zinc-50 disabled:cursor-not-allowed;
  }

  .text-btn {
    @apply inline-flex h-10 items-center rounded-md border border-zinc-300 bg-white px-3 text-[12px] font-medium text-zinc-800 transition hover:bg-zinc-50;
  }

  .sync-icon-glyph {
    @apply block;
  }

  .sync-icon-glyph--spinning {
    animation: sync-rotate-reverse 0.85s linear infinite;
  }

  .auth-panel {
    @apply mb-2;
  }

  .auth-label-row {
    @apply mb-1 flex items-center justify-between gap-2;
  }

  .auth-label {
    @apply text-[14px] font-medium text-zinc-800;
  }

  .help-btn {
    @apply inline-flex h-[22px] w-[22px] items-center justify-center rounded-full border border-amber-200 bg-amber-50 text-[13px] font-semibold leading-none text-amber-800;
  }

  .token-row {
    @apply mb-3 flex items-center overflow-hidden rounded-lg border border-zinc-300 bg-white;
  }

  .token-input {
    @apply flex-1 border-none px-3.5 py-3 text-[15px] outline-none;
  }

  .token-toggle-btn {
    @apply inline-flex h-11 w-11 items-center justify-center border-0 border-l border-l-zinc-300 bg-white p-0 text-zinc-600;
  }

  .auth-actions {
    @apply flex items-center gap-2.5;
  }

  .btn-primary {
    @apply flex-1 cursor-pointer rounded-lg border border-blue-600 bg-blue-600 px-3 py-2 text-sm text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-70;
  }

  .btn-secondary {
    @apply flex-1 cursor-pointer rounded-lg border border-zinc-300 bg-white px-3 py-2 text-sm text-zinc-900 transition hover:bg-zinc-50 disabled:cursor-not-allowed disabled:opacity-70;
  }

  .loading-panel {
    @apply mb-3 rounded-lg border border-zinc-200 bg-zinc-100 p-3;
  }

  .loading-skeleton {
    @apply mb-2 h-8 w-full animate-pulse rounded-md border border-zinc-200 bg-white last:mb-0;
  }

  .loading-skeleton--short {
    @apply w-3/4;
  }

  .loading-skeleton--mid {
    @apply w-5/6;
  }

  .oauth-inline {
    @apply inline-flex items-center gap-1.5;
  }

  .oauth-logo {
    @apply block h-4 w-4;
  }

  .ds-order-panel {
    @apply mb-3 rounded-lg border border-zinc-300 bg-zinc-100 p-2;
  }

  .plain-list {
    @apply m-0 list-none p-0;
  }

  .draggable-item {
    @apply mb-1 cursor-grab rounded border border-zinc-200 bg-white px-2 py-1.5 text-[13px] text-zinc-700 last:mb-0 active:cursor-grabbing;
  }

  .templates-header {
    @apply mb-3 flex items-center gap-2.5;
  }

  .ds-icon-wrap {
    @apply flex h-7 w-7 items-center justify-center text-2xl leading-none;
  }

  .ds-icon-image {
    @apply h-6 w-6 object-contain;
  }

  .ds-title-wrap {
    @apply flex min-w-0 flex-1 items-center gap-1.5;
  }

  .ds-title {
    @apply truncate text-[15px] font-semibold text-zinc-900;
  }

  .sync-icon--inline {
    @apply ml-auto shrink-0;
  }

  .templates-body {
    @apply mt-3;
  }

  .template-item {
    @apply mb-1 flex cursor-grab items-center rounded border border-zinc-200 bg-white px-2 py-1.5 text-[13px] text-zinc-700 last:mb-0 active:cursor-grabbing;
  }

  .template-icon-wrap {
    @apply mr-2;
  }

  .template-icon-image {
    @apply h-[18px] w-[18px] align-middle;
  }

  .topbar-action-btn:focus-visible,
  .icon-btn:focus-visible,
  .text-btn:focus-visible,
  .btn-primary:focus-visible,
  .btn-secondary:focus-visible,
  .token-toggle-btn:focus-visible,
  .help-btn:focus-visible,
  .token-input:focus-visible {
    @apply outline-none ring-2 ring-blue-400 ring-offset-1;
  }
}

@layer utilities {
  @keyframes sync-rotate-reverse {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(-360deg);
    }
  }

  .sync-icon:hover .sync-icon-glyph--hover {
    animation: sync-rotate-reverse 0.85s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .sync-icon-glyph--spinning,
    .sync-icon:hover .sync-icon-glyph--hover {
      animation: none !important;
    }
  }
}
